<Page
    x:Class="Project_D.Views.StorageMainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Project_D.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="using:Project_D.ViewModels"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <DataTemplate x:Key="StorageTemplate" x:DataType="viewmodels:StorageViewModel">
            <StackPanel Orientation="Horizontal">
                <Image Name="Picture" Source="{x:Bind Thumbnail}"></Image>
                <StackPanel>
                    <TextBlock Text="{x:Bind DisplayName,Mode=TwoWay}"></TextBlock>
                    <TextBlock Text="{x:Bind Path}"></TextBlock>
                </StackPanel>

            </StackPanel>
        </DataTemplate>
    </Page.Resources>

    <Grid Name="FileMainGrid" 
          AllowDrop="True"
          Drop="FileMainGrid_Drop"
          DragOver="FileMainGrid_DragOver"    >
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="auto"></RowDefinition>
        </Grid.RowDefinitions>

        <RelativePanel Style="{StaticResource AppBar}">
            <AppBarButton Icon="Back"></AppBarButton>
            <ComboBox Name="SortedType" 
                      RelativePanel.LeftOf="SortedDirection" RelativePanel.AlignVerticalCenterWith="SortedDirection"
                      PlaceholderText="XXXXXXXXXXXXX" Width="200"
                      SelectionChanged="SortedType_SelectionChanged"
                      ItemsSource="{x:Bind StorageMain.SortedKinds}"
                      >
            </ComboBox>
            <Button Name="SortedDirection" RelativePanel.LeftOf="Filter" RelativePanel.AlignVerticalCenterWith="Filter" Background="Transparent">
                <SymbolIcon Symbol="Sort"></SymbolIcon>
            </Button>
            <AutoSuggestBox Name="Filter" 
                            RelativePanel.AlignRightWithPanel="True" RelativePanel.AlignVerticalCenterWithPanel="True" 
                            Width="200" Margin="0 0 10 0"
                            QueryIcon="Find"></AutoSuggestBox>
        </RelativePanel>

        <GridView Grid.Row="1" Name="StorageView" ItemsSource="{x:Bind StorageMain.Storages}" ItemTemplate="{StaticResource StorageTemplate}" ></GridView>

        <RelativePanel Grid.Row="2" Style="{StaticResource AppBar}">


        </RelativePanel>

    </Grid>
</Page>
